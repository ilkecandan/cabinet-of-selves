<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title id="checkinTitle">Daily Check-In - Cabinet of Selves</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
    <style>
        body { 
            font-family: 'Quicksand', Arial, sans-serif; 
            background: linear-gradient(to bottom, #bde0fe, #a2d2ff); 
            margin: 0; 
            padding: 20px; 
            color: #4a4a4a; 
            text-align: center; 
        }
        main { 
            background: white; 
            padding: 20px; 
            border-radius: 15px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
            margin: 20px auto; 
            max-width: 750px; 
            text-align: center; 
        }
        label { 
            font-weight: bold; 
            display: block; 
            margin-top: 10px; 
        }
        input, select, textarea { 
            width: 100%; 
            padding: 8px; 
            margin-top: 5px; 
            border-radius: 8px; 
        }
        button { 
            margin-top: 15px; 
            cursor: pointer; 
            background: #74c69d; 
            color: white; 
            padding: 10px 15px; 
            border: none; 
            border-radius: 8px; 
        }
        .back-to-cabinet { 
            display: block; 
            margin-top: 15px; 
            text-decoration: none; 
            padding: 10px; 
            background: #74c69d; 
            color: white; 
            border-radius: 8px; 
        }
    </style>
</head>
<body>
    <video id="backgroundVideo" autoplay loop muted>
        <source src="images/background.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
<header>
    <h1 id="checkinHeader" data-en="ğŸŒˆ Daily Check-In" data-tr="ğŸŒˆ GÃ¼nlÃ¼k Kontrol" data-de="ğŸŒˆ TÃ¤gliches Einchecken">ğŸŒˆ Daily Check-In</h1>
    <p id="checkinDescription" data-en="Reflect on your day and connect with your inner world."
        data-tr="GÃ¼nÃ¼nÃ¼zÃ¼ yansÄ±tÄ±n ve iÃ§ dÃ¼nyanÄ±zla baÄŸlantÄ± kurun."
        data-de="Reflektiere Ã¼ber deinen Tag und verbinde dich mit deiner inneren Welt.">
        Reflect on your day and connect with your inner world.
    </p>
</header>

<!-- Language Selector -->
<div class="language-selector">
    <select id="language" onchange="switchLanguage(this.value)">
        <option value="en">English</option>
        <option value="tr">TÃ¼rkÃ§e</option>
        <option value="de">Deutsch</option>
    </select>
</div>

<main>
    <label>ğŸ“… <span id="dateLabel" data-en="Date" data-tr="Tarih" data-de="Datum">Date</span>:</label>
    <input type="date" id="checkin-date">

    <label>ğŸŒ¦ï¸ <span id="moodLabel" data-en="Today's Mood" data-tr="BugÃ¼nkÃ¼ Ruh Hali" data-de="Heutige Stimmung">Today's Mood</span>:</label>
    <select id="mood">
        <option data-en="Calm" data-tr="Sakin" data-de="Ruhig">Calm</option>
        <option data-en="Reflective" data-tr="DÃ¼ÅŸÃ¼nceli" data-de="Nachdenklich">Reflective</option>
        <option data-en="Anxious" data-tr="EndiÅŸeli" data-de="Ã„ngstlich">Anxious</option>
        <option data-en="Joyful" data-tr="NeÅŸeli" data-de="Freudig">Joyful</option>
        <option data-en="Sad" data-tr="ÃœzgÃ¼n" data-de="Traurig">Sad</option>
        <option data-en="Relaxed" data-tr="RahatlamÄ±ÅŸ" data-de="Entspannt">Relaxed</option>
    </select>

    <label>ğŸ’š <span id="partsLabel" data-en="Active Parts" data-tr="Aktif ParÃ§alar" data-de="Aktive Teile">Active Parts</span>:</label>
    <div id="partsCheckboxList"></div>

    <label>âœ¨ <span id="eventsLabel" data-en="Significant Events" data-tr="Ã–nemli Olaylar" data-de="Wichtige Ereignisse">Significant Events</span>:</label>
    <textarea id="significantEvents"></textarea>

    <label>ğŸ“ <span id="thoughtsLabel" data-en="Additional Thoughts" data-tr="Ek DÃ¼ÅŸÃ¼nceler" data-de="ZusÃ¤tzliche Gedanken">Additional Thoughts</span>:</label>
    <textarea id="additionalThoughts"></textarea>

    <button onclick="saveCheckIn()" id="saveButton"
        data-en="ğŸ’¾ Save Check-In"
        data-tr="ğŸ’¾ GÃ¼nlÃ¼k KontrolÃ¼ Kaydet"
        data-de="ğŸ’¾ Eintrag speichern">ğŸ’¾ Save Check-In</button>

    <a href="checkin-history.html" class="back-to-cabinet" id="viewHistoryButton"
        data-en="ğŸ“– View Check-In History"
        data-tr="ğŸ“– GÃ¼nlÃ¼k Kontrol GeÃ§miÅŸini GÃ¶r"
        data-de="ğŸ“– Check-In Verlauf anzeigen">
        ğŸ“– View Check-In History
    </a>

    <a href="index.html" class="back-to-cabinet" id="backToCabinetButton"
        data-en="ğŸ”™ Back to Cabinet"
        data-tr="ğŸ”™ Kabine DÃ¶n"
        data-de="ğŸ”™ ZurÃ¼ck zum Schrank">
        ğŸ”™ Back to Cabinet
    </a>

    <div class="animation-container">
        <dotlottie-player
            src="https://lottie.host/91aa48d4-cf7a-4f07-8f16-c7b7306a97fe/vmM9r59GYJ.lottie"
            background="transparent"
            speed="1"
            style="width: 300px; height: 300px"
            loop
            autoplay>
        </dotlottie-player>
    </div>
    
    <style>
        .animation-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
    
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
    loadParts();
    const lang = localStorage.getItem('language') || 'en';
    document.getElementById('language').value = lang;
    switchLanguage(lang);
});

function loadParts() {
    const parts = JSON.parse(localStorage.getItem('innerParts') || '[]');
    const container = document.getElementById('partsCheckboxList');
    container.innerHTML = parts.map(part => 
        `<label><input type="checkbox" value="${part.name}"> ${part.name}</label>`
    ).join('');
}

function saveCheckIn() {
    const date = document.getElementById('checkin-date').value;
    const mood = document.getElementById('mood').value;
    const events = document.getElementById('significantEvents').value;
    const thoughts = document.getElementById('additionalThoughts').value;

    const selectedParts = Array.from(document.querySelectorAll('#partsCheckboxList input:checked'))
        .map(checkbox => checkbox.value);

    if (!date) {
        alert("Please enter a date for your check-in.");
        return;
    }

    const checkIns = JSON.parse(localStorage.getItem('dailyCheckIns') || '[]');
    checkIns.push({ date, mood, parts: selectedParts, events, thoughts });
    localStorage.setItem('dailyCheckIns', JSON.stringify(checkIns));

    alert("âœ… Check-In saved successfully!");
}

function switchLanguage(lang) {
    localStorage.setItem('language', lang);
    document.querySelectorAll("[data-" + lang + "]").forEach(el => {
        el.innerText = el.getAttribute("data-" + lang);
    });
}
</script>

</body>
</html>
