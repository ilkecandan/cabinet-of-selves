<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Meet Your Part</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Quicksand', Arial, sans-serif;
            background: linear-gradient(to bottom, #bde0fe, #a2d2ff);
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        main {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 20px auto;
        }

        img.part-image-small {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #74c69d;
        }

        label {
            font-weight: bold;
            display: block;
            margin-top: 10px;
        }

        input, textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        button {
            margin: 10px;
            padding: 10px 15px;
            background-color: #74c69d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #4caf50;
            color: white;
            padding: 12px 18px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 1000;
            font-family: 'Quicksand', Arial, sans-serif;
        }

        .notification.error {
            background-color: #f44336;
        }

        .language-selector {
            margin: 10px 0;
        }
    </style>
</head>
<body>

<header>
    <h1 id="partTitle">Meet Your Part</h1>
    <p id="pageDescription">This is a gentle place to explore and understand this part of you.</p>
</header>

<div class="language-selector">
    <label for="language">üåê</label>
    <select id="language" onchange="switchLanguage(this.value)">
        <option value="en">English</option>
        <option value="tr">T√ºrk√ße</option>
        <option value="de">Deutsch</option>
    </select>
</div>

<main>
    <img id="partImagePreview" src="images/girl.jpg" class="part-image-small">
    <input type="file" id="partImageInput" accept="image/*">

    <label id="labelKnownSince">üå± How long have you known this part?</label>
    <input type="text" id="partSince">

    <label id="labelWants">üí¨ What does this part want for you?</label>
    <textarea id="partWants"></textarea>

    <label id="labelWorksWith">üåü Which parts does this part work well with?</label>
    <input type="text" id="partWorksWith">

    <label id="labelClashesWith">‚öîÔ∏è Which parts does this part clash with?</label>
    <input type="text" id="partClashesWith">

    <label id="labelRole">üé≠ What role does this part play?</label>
    <input type="text" id="partRole">

    <button onclick="savePartDetails()" id="saveButton">üíæ Save Part Details</button>
    <button onclick="window.location.href='index.html'">‚¨ÖÔ∏è Back to Cabinet</button>
    <button onclick="window.location.href='parts.html'">üìÇ Back to All Parts</button>
</main>

<script>
const params = new URLSearchParams(window.location.search);
const partName = params.get('part');
document.getElementById('partTitle').innerText = `Meet ${partName}`;

let part = JSON.parse(localStorage.getItem(`part-${partName}`)) || {};
let allParts = JSON.parse(localStorage.getItem('innerParts') || '[]');

document.getElementById('partSince').value = part.knownSince || '';
document.getElementById('partWants').value = part.wants || '';
document.getElementById('partWorksWith').value = part.worksWith || '';
document.getElementById('partClashesWith').value = part.clashesWith || '';
document.getElementById('partRole').value = part.role || '';
document.getElementById('partImagePreview').src = part.image || 'images/girl.jpg';

document.getElementById('partImageInput').addEventListener('change', (event) => {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = () => {
            part.image = reader.result;
            document.getElementById('partImagePreview').src = part.image;
            savePart(true);
            showNotification('‚úÖ Image saved!', 'success');
        };
        reader.readAsDataURL(file);
    }
});

function savePartDetails() {
    part.knownSince = document.getElementById('partSince').value;
    part.wants = document.getElementById('partWants').value;
    part.worksWith = document.getElementById('partWorksWith').value;
    part.clashesWith = document.getElementById('partClashesWith').value;
    part.role = document.getElementById('partRole').value;

    savePart();
    showNotification('‚úÖ Details saved!', 'success');
}

function savePart(isImageOnly = false) {
    localStorage.setItem(`part-${partName}`, JSON.stringify(part));

    const index = allParts.findIndex(p => p.name === partName);
    if (index !== -1) {
        allParts[index].img = part.image;
    } else if (!isImageOnly) {
        allParts.push({ name: partName, img: part.image || 'images/girl.jpg' });
    }

    localStorage.setItem('innerParts', JSON.stringify(allParts));
}

function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `notification ${type === 'error' ? 'error' : ''}`;
    notification.innerText = message;
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 3000);
}

const translations = {
    en: {
        pageDescription: "This is a gentle place to explore and understand this part of you.",
        labelKnownSince: "üå± How long have you known this part?",
        labelWants: "üí¨ What does this part want for you?",
        labelWorksWith: "üåü Which parts does this part work well with?",
        labelClashesWith: "‚öîÔ∏è Which parts does this part clash with?",
        labelRole: "üé≠ What role does this part play?",
        saveButton: "üíæ Save Part Details"
    },
    tr: {
        pageDescription: "Bu par√ßanƒ±zƒ± ke≈üfetmek ve anlamak i√ßin nazik bir yer.",
        labelKnownSince: "üå± Bu par√ßayƒ± ne zamandƒ±r tanƒ±yorsunuz?",
        labelWants: "üí¨ Bu par√ßa sizden ne istiyor?",
        labelWorksWith: "üåü Bu par√ßa hangi par√ßalarla iyi √ßalƒ±≈üƒ±r?",
        labelClashesWith: "‚öîÔ∏è Bu par√ßa hangi par√ßalarla √ßatƒ±≈üƒ±r?",
        labelRole: "üé≠ Bu par√ßa hangi rol√º oynar?",
        saveButton: "üíæ Par√ßa Detaylarƒ±nƒ± Kaydet"
    }
};

function switchLanguage(lang) {
    localStorage.setItem('language', lang);
    const t = translations[lang];
    document.getElementById('pageDescription').innerText = t.pageDescription;
    document.getElementById('labelKnownSince').innerText = t.labelKnownSince;
    document.getElementById('labelWants').innerText = t.labelWants;
    document.getElementById('labelWorksWith').innerText = t.labelWorksWith;
    document.getElementById('labelClashesWith').innerText = t.labelClashesWith;
    document.getElementById('labelRole').innerText = t.labelRole;
    document.getElementById('saveButton').innerText = t.saveButton;
}

document.addEventListener('DOMContentLoaded', () => switchLanguage(localStorage.getItem('language') || 'en'));
</script>

</body>
</html>
