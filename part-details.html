<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <title id="pageTitle">Meet Your Part</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="part-details.js"></script>
    <style>
        /* Styling for Image */
        .image-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .part-image {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid #0077b6;
        }

        /* Input and Textarea Styling */
        input[type="text"], textarea {
            width: 90%;
            padding: 10px;
            font-size: 1.2em;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        textarea {
            height: 100px;
            resize: vertical;
        }

        /* Notification Styling */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: none;
            font-size: 1.2em;
            z-index: 1000;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <video id="backgroundVideo" autoplay loop muted>
        <source src="images/nature.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

<header class="main-header">
    <h1 id="partTitle">Meet Your Part</h1>
    <p id="pageDescription">This is a gentle place to explore and understand this part of you.</p>
</header>

<!-- Language Selector -->
<div class="language-selector">
    <label for="language">ğŸŒ</label>
    <select id="language" onchange="switchLanguage(this.value)">
        <option value="en">English</option>
        <option value="tr">TÃ¼rkÃ§e</option>
        <option value="de">Deutsch</option>
    </select>
</div>

<!-- Main Section -->
<main class="part-details-box">
    <!-- Image Upload and Preview -->
    <div class="image-container">
        <img id="partImagePreview" src="images/girl.jpg" class="part-image">
        <input type="file" id="partImageInput" accept="image/*">
    </div>

    <!-- Form Grid Layout -->
    <div class="form-container">
        <div class="form-group">
            <label id="labelKnownSince">ğŸŒ± How long have you known this part?</label>
            <input type="text" id="partSince" placeholder="A long time, since childhood, etc.">
        </div>

        <div class="form-group">
            <label id="labelWants">ğŸ’¬ What does this part want for you?</label>
            <textarea id="partWants"></textarea>
        </div>

        <div class="form-group">
            <label id="labelWorksWith">ğŸŒŸ Which parts does this part work well with?</label>
            <input type="text" id="partWorksWith">
        </div>

        <div class="form-group">
            <label id="labelClashesWith">âš”ï¸ Which parts does this part clash with?</label>
            <input type="text" id="partClashesWith">
        </div>

        <div class="form-group">
            <label id="labelRole">ğŸ­ What role does this part play?</label>
            <input type="text" id="partRole">
        </div>
    </div>

    <!-- Buttons -->
    <div class="button-container">
        <button onclick="savePartDetails()" id="saveButton">ğŸ’¾ Save Part Details</button>
        <button onclick="location.href='index.html'" id="backCabinetButton">â¬…ï¸ Back to Cabinet</button>
        <button onclick="location.href='parts.html'" id="backPartsButton">ğŸ“‚ Back to All Parts</button>
    </div>
</main>

<!-- Notification -->
<div id="notification" class="notification"></div>

<!-- Script Section -->
<script>
    const translations = {
        en: {
            imageSaved: "âœ… Image saved successfully!",
            partSaved: "âœ… Save part details",
            knownSince: "ğŸŒ± How long have you known this part?",
            wants: "ğŸ’¬ What does this part want for you?",
            worksWith: "ğŸŒŸ Which parts does this part work well with?",
            clashesWith: "âš”ï¸ Which parts does this part clash with?",
            role: "ğŸ­ What role does this part play?"
        },
        tr: {
            imageSaved: "âœ… Resim baÅŸarÄ±yla kaydedildi!",
            partSaved: "âœ… Kaydet",
            knownSince: "ğŸŒ± Bu parÃ§ayÄ± ne kadar sÃ¼redir tanÄ±yorsunuz?",
            wants: "ğŸ’¬ Bu parÃ§a sizden ne istiyor?",
            worksWith: "ğŸŒŸ Hangi parÃ§alarla iyi Ã§alÄ±ÅŸÄ±yor?",
            clashesWith: "âš”ï¸ Hangi parÃ§alarla Ã§atÄ±ÅŸÄ±yor?",
            role: "ğŸ­ Bu parÃ§anÄ±n rolÃ¼ nedir?"
        },
        de: {
            imageSaved: "âœ… Bild erfolgreich gespeichert!",
            partSaved: "âœ… speicher",
            knownSince: "ğŸŒ± Wie lange kennst du diesen Teil?",
            wants: "ğŸ’¬ Was will dieser Teil fÃ¼r dich?",
            worksWith: "ğŸŒŸ Mit welchen Teilen arbeitet dieser Teil gut zusammen?",
            clashesWith: "âš”ï¸ Mit welchen Teilen gerÃ¤t dieser Teil in Konflikt?",
            role: "ğŸ­ Welche Rolle spielt dieser Teil?"
        }
    };

    function switchLanguage(lang) {
        localStorage.setItem('language', lang);
        document.getElementById('saveButton').innerText = translations[lang].partSaved;
        document.getElementById('labelKnownSince').innerText = translations[lang].knownSince;
        document.getElementById('labelWants').innerText = translations[lang].wants;
        document.getElementById('labelWorksWith').innerText = translations[lang].worksWith;
        document.getElementById('labelClashesWith').innerText = translations[lang].clashesWith;
        document.getElementById('labelRole').innerText = translations[lang].role;
    }

    document.addEventListener('DOMContentLoaded', () => {
        const lang = localStorage.getItem('language') || 'en';
        document.getElementById('language').value = lang;
        switchLanguage(lang);
    });

    document.getElementById('partImageInput').addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('partImagePreview').src = e.target.result;
                localStorage.setItem('partImage', e.target.result);
                showNotification(translations[localStorage.getItem('language')].imageSaved);
            };
            reader.readAsDataURL(file);
        }
    });

    function savePartDetails() {
        let part = {
            name: document.getElementById('partTitle').innerText.replace('Meet ', ''),
            knownSince: document.getElementById('partSince').value,
            wants: document.getElementById('partWants').value,
            worksWith: document.getElementById('partWorksWith').value,
            clashesWith: document.getElementById('partClashesWith').value,
            role: document.getElementById('partRole').value,
            image: document.getElementById('partImagePreview').src
        };

        let parts = JSON.parse(localStorage.getItem('innerParts')) || [];
        parts.push(part);
        localStorage.setItem('innerParts', JSON.stringify(parts));

        showNotification(translations[localStorage.getItem('language')].partSaved);
    }

    function showNotification(message) {
        const notification = document.getElementById('notification');
        notification.innerText = message;
        notification.style.display = 'block';
        setTimeout(() => {
            notification.style.display = 'none';
        }, 3000);
    }
</script>

</body>
</html>
