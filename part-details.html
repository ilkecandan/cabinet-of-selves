<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Meet Your Part</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<header>
    <h1 id="partTitle">Meet Your Part</h1>
</header>

<main>
    <img id="partImagePreview" src="images/girl.jpg">
    <input type="file" id="partImageInput" accept="image/*">
    
    <label>How long have you known this part?</label>
    <input type="text" id="partSince">

    <label>What does this part want?</label>
    <textarea id="partWants"></textarea>

    <label>Which parts does this part work well with?</label>
    <input type="text" id="partWorksWith">

    <label>Which parts does this part clash with?</label>
    <input type="text" id="partClashesWith">

    <label>What role does this part play?</label>
    <input type="text" id="partRole">

    <button onclick="savePartDetails()">Save</button>
    <button onclick="window.location.href='parts.html'">Back to Parts</button>
</main>

<script>
const params = new URLSearchParams(window.location.search);
const partName = params.get('part');
document.getElementById('partTitle').innerText = `Meet ${partName}`;

let part = JSON.parse(localStorage.getItem(`part-${partName}`)) || {};
document.getElementById('partSince').value = part.knownSince || '';
document.getElementById('partWants').value = part.wants || '';
document.getElementById('partWorksWith').value = part.worksWith || '';
document.getElementById('partClashesWith').value = part.clashesWith || '';
document.getElementById('partRole').value = part.role || '';
document.getElementById('partImagePreview').src = part.image || 'images/girl.jpg';

document.getElementById('partImageInput').addEventListener('change', (event) => {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = () => {
            part.image = reader.result;
            document.getElementById('partImagePreview').src = part.image;
            savePart();
        };
        reader.readAsDataURL(file);
    }
});

function savePartDetails() {
    part.knownSince = document.getElementById('partSince').value;
    part.wants = document.getElementById('partWants').value;
    part.worksWith = document.getElementById('partWorksWith').value;
    part.clashesWith = document.getElementById('partClashesWith').value;
    part.role = document.getElementById('partRole').value;

    savePart();
}

function savePart() {
    localStorage.setItem(`part-${partName}`, JSON.stringify(part));
}
</script>

</body>
</html>
